
# 単語帳とメディアの同期

Anki (デスクトップ版)を使用してメディア付きの単語帳を作成してください。 それを Ankiweb にアップロードしてください。

http://ankisrs.net/docs/SyncingMedia.html のドキュメントにある DropBox を使用したメディアの同期方法のガイドに従ってください。

:ヒント： http://www.ankisrs.net/ にある安定版最新リリースの Anki を使用してください。Linux のディストリビューションは通常最新版を出荷に含めていません。

Ankiweb でメディアを動作させることができれば、そのまま、Android 端末に同期することが出来ます。

メニューの「設定->  一般設定 ->  同期」で、「同期するメディアを取得」をチェックしてください。後は、アンキドロイドは自動的に変更されたメディアを取得します。欠けているすべてのメディアをダウンロードするには、「すべての単語帳」の画面で、該当の単語帳を 2 秒間以上長押しし、「不足しているメディアをダウンロードします」を選んでください。

念のため、単語帳を開いて、メニューから「同期」を選んでください。以降は、イメージなどのメディアは自動的に同期されて動作します。

<br>

<h1>メディアの同期(Ankiデスクトップ)</h1>
(ここからは、Ankiデスクトップ版の「同期」に関する記事の翻訳です。)<br>
<br>
AnkiWebとモバイル端末のメディアを最初に同期するには、いくつかの余分な手順が必要です。手続きは比較的簡単で無償です。<br>
<br>
最近、あるMacユーザーがビデオチュートリアルを提供しました。映像を見た方が分かりやすい方は、以下をチェックしてください。<br>

<a href='http://www.youtube.com/watch?v=uD9tj_jSBTc&feature=related'>http://www.youtube.com/watch?v=uD9tj_jSBTc&amp;feature=related</a>
<br><br>
<h2>Dropboxによる自動同期</h2>

Dropbox は、オンラインでファイルのバックアップや同期を提供する会社です。彼らは、Ankiで使用するに十分な、かなりの容量を無償で提供しています。<br><br>
残念ながら、中国政府はDropboxのアクセスを中国で制限しているので、もし中国にお住まいの場合は、後の「手動セットアップ」の項までスキップしてください。<br>
<blockquote><h3>Step 1: Dropboxを入手</h3>
もし、Dropboxのアカウントを既に持っていない場合、 <a href='https://www.dropbox.com/'>https://www.dropbox.com/</a> 　にアクセスして、インストラクションに従い、Dropboxをインストールしてください。起動して、新しいアカウントを登録作成してください。.<br>
<h3>Step 2: Dropboxの問題点を解決</h3>
もし、あなたが、MacやLinuxのユーザーで、Dropboxのフォルダーの場所をカスタマイズしていない場合は、このStepは必要ありませんので、飛ばしてください。それ以外の方は読み続けてください。<br><br>
2011年10月にDropbox が行った変更によってAnkiのメディアサポートに問題点が生じてしまいました。これに対処するには、「ファイル＞ダウンロード＞公開プラグイン」に行き、「dropbox」を検索して「fix dropbox」プラグインをダウンロードしてください。<br><br>
もし、あなたがWindowsユーザか、DropBoxフォルダーをカスタマイズしているのであれば、次の文節に読み進んでください。そうでなければ、次のStepに進んでください。<br>
Ankiは、あなたのDropBoxフォルダーが何処にあるのか知りません。そのため、プラグインを編集して、Ankiに正しい場所を教える必要があります。<br><br>
</blockquote><ul><li>システムトレイのDropBoxアイコンを右クリックして、「設定」を選び、「高度の設定」タブを選ぶと「ファイルの保存場所」が分かります。（訳注：システムトレイはデスクトップの右下の時刻などのアイコンと一緒になっています。分かりにくい場合は、通常、DropBoxを起動するとファイルの保存場所を開いてくれるはずなので、それでも分かるはずです。）　それは、通常、「C:\Users\Myusername\Dropbox」、とか 「/Users/myuser/DropBox」のような場所のはずです。<br>
</li><li>Ankiで、設定>プラグイン>プラグインフォルダーを開くを選んでください。そこに、 「fix dropbox.py」というファイルが有るはずです。そのファイルをNotepadなどの編集ツールで開いてください。<br>
</li><li>以下のような行を探してください。:<br>
<blockquote><code>#</code>return "c:\\users\\bob\\documents\\dropbox"<br>
</blockquote></li><li>頭の「#」を削除し, 「"」の間のテキストを、あなたのDropBoxのファイル保存場所と置き替えてください。そして、各「\」を「\\」で置き替えてください。これによって、上の例は、下記のようになるはずです。<br>
<blockquote>return "C:\\Users\\Myusername\\Dropbox"<br>
</blockquote></li><li>この、「return」の前のスペースは削除変更しないでください。インデントは編集前と同じでなければなりません。</li></ul>

ファイルを保存の後、Ankiを再起動してください。<br>
<blockquote><h3>Step 3:  Ankiに設定する</h3>
Ankiに於いて、「設定>設定」を選んでください。 (Macの場合 Anki>Preferences). Windowの下の方に、「Media」というセクションがあるはずです。その選択ボックスをクリックして、「Keep media next to the deck」を、「Keep media in Dropbox」に変更してください。<br><br>
Windowを閉じると、単語帳のリストに戻るはずです。再び、単語帳を開くと、AnkiはDropboxを開いて、パブリックリンク（public link）を入力するように促します。フォルダーの中にあるファイル「right-click-me.txt」を右クリックするとDropboxオプションがあるのでその「パブリックリンクをコピー」を選び、Ankiに入力します。もしDropboxオプションが表れない場合、AnkiはDropboxのフォルダーがあるだろうと思われる場所（たぶん、間違い）を選んでしまいます。その場合、前のStepに戻って、正しい場所が入力されたかどうか確認してください。<br><br>
これで、セットアップの手順は完了です。ここで、「ファイル＞同期」を行えば、AnkiWebにメディアが表れ、利用できるはずです。<br><br>
Dropboxは全てのメディアをアップロードするのに、数分から数時間掛ることがあります。したがって、同期が完了するのを待ってから、AnkiWebやモバイル端末でのメディアの利用を行ってください。<br><br>
今後、他の単語帳で同期を行う場合、それらは自動的に設定されます。－従って、上記のStepを行う必要はありません。<br><br>
もし、複数のデスクトップ機を使用していて、それらを同期している場合、各マシンに上記の手順を再度行う必要があることに注意してください。<br><br>
<h2>手動設定</h2>
もし、あなたが、Dropbox以外を使用したい場合、以下のStepを行う必要があります。AnkiWebとモバイルクライアントは、認証を必要としないどんなウェブサイトからもメディアを読みこむことが出来るので、個人のウェブサイトにメディアを置いて好きな異なるファイル同期サービスを利用することが出来ます。<br><br>
ここで個人のウェブサイトが  <a href='http://example.com'>http://example.com</a> で、単語帳がstuff.ankiで、, メディアは stuff.mediaに保存されていると仮定しましょう。 これをAnkiWebで使用するには、あなたのウェブサイトにコピーして、それが、   <a href='http://example.com/stuff.media'>http://example.com/stuff.media</a>  としてアクセスできるとしましょう。<br>
Ankiで「設定＞単語帳プロパティー」を選び、「メディアのURL」に <a href='http://example.com/stuff.media'>http://example.com/stuff.media</a> をペーストしてください。そして、「ファイル＞同期」を行った後、メディアは、AnkiWebから見えるようになるはずです。<br><br>
もし、代替の同期サービスを使用している場合、あなたはたぶん、毎回、単語帳の隣からコピーするのではなく、自動的にアップロードされるようにしたいでしょう。そのためには、設定のダイアログで、"Keep media next to the deck" から "Keep media in a custom folder"に変える必要があります。フォルダーはプレフィックスとなり、例えば、あなたが c:\syncedfiles と指定した場合、Anki は  c:\syncedfiles\stuff.media を作成します。<br><br>
<h2>問題点</h2>
もし、デスクトップで画像が見られない場合は、プラグインのセクションを読んでください。<br><br>
もし、AnkiMobileで画像が見られない場合は、<br>
</blockquote><ol><li>Dropboxがメディアのアップロードが完了するまで待ったかどうか確認してください。<br>
</li><li>Tools>Advanced>Check Media DBを行ってください。もし、これでエラーが出ない場合でも、メディアデータベースは再構築されています。残りのStepも続けて行ってください。<br>
</li><li>Tools>Advanced>Check DBを行ってください。前と同様、エラーが出なくても、次へ進んでください。<br>
</li><li>File>Syncを行ってください。<br>
</li><li>あなたのiPhoneで、単語帳の同期かダウンロードを行ってください。AnkiMobileが単語帳のダウンロードの後、メディアのダウンロードを開始するはずです。<br>
<br>
<h2>制限事項</h2>
AnkiWebのオーディオプレイヤーはmp3ファイルしかサポートしません。メディアファイルへのバスは英語アルファベット以外は処理できません。もし、あなたのメディアファイルが名前またはフォルダーの名前がその他の言語やスペース、ある句読点などを含んでいる場合はオーディオはプレイされません。しかし、デスクトップや、モバイル端末では、使用できます。<br><br>
パーセントエンコードのファイル名（例えば、"file%20name.jpg"のような名前でコンピュータに保存されているもの）は同期できません。なぜなら、Ankiは好ましい動作をするプログラムは、元来の名前でファイルを保存することを期待し、エンコードされたものですることを期待しないからです。Ankiは将来、そのようなファイルも処理するべきかもしれませんが、今のところ、あなたは、パーセントをファイル名が含まないように編集し、再度、media DBをチェックする必要があります。もし、あなたが、AnkiMobileやAnkidroidを、使用している場合、iTunesやSDカードを介してメディアを直接コピーすることも出来ます。<br><br>
<h2>トラブルシューティング</h2>
もし、上記の「問題点」の全てをチェックし、尚且つ問題がある場合、以下の各項目をチェックして、それぞれの結果をヘルプフォーラムにレポートするようにしてください。<br>
</li><li>Ankiの「設定」画面（Macでなければ、「設定＞設定」）でMediaは何に設定されているか？<br>
</li><li>「設定＞単語帳プロパティー」で「メディアのURL」は何に設定されているか？<br>
</li><li>Dropboxのフォルダーを開き、Publicフォルダーに行き、(該当単語帳).mediaのフォルダーを探してください。もし、その単語帳がメディアを使用しているなら、その中に、一つ以上のメディアファイルが有るはずです。そのファイル名を一つコピーしてください。<br>
</li><li>そのファイル名をメディアのURLに追加すると、例えば、「<code>http://dl.dropbox.com/u12345/mydeck.media/image.jpg</code>」のようになるはずです。 これをウェブブラウザーのリンクにペーストしてください。イメージやオーディオは正常にダウンロードされましたか？もし、404エラーメッセージがでるような場合、Dropboxのインストレーションがうまく行っていません。<br>
</li><li>もし、メディアがiPhone/Android phoneで正常に動作するが、AnkiWebでは動作しない場合、上記の「制限事項」 を参照してください。<br>
</li><li>もし、メディアがAnkiWebでは動作するが、iPhoneでは動作しない場合、iPhoneを再起動して、単語帳を再度ダウンロードしてください。もし、それでも問題が残る場合、たぶん、上記の「問題」の項目を見逃しているかもしれません。<br><br>
(Last updated 2012-03-10 17:36:20 JST @ankisrs.net)